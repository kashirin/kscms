tinymce.PluginManager.add('columns', function(editor, url) {
	
	

    // Add a button that opens a window
    editor.addButton('columns', {
        text: 'Колонки',
        icon: false,
        onclick: function() {
            // Open window
            editor.windowManager.open({
                title: 'Вставка нескольких колонок',
                body: [
                    {type: 'textbox', name: 'title', label: 'Количество колонок'}
                ],
                onsubmit: function(e) {
                    // Insert content when the window form is submitted
					var dump_text = 'Lorem Ipsum - это текст-"рыба", часто используемый в печати и вэб-дизайне. Lorem Ipsum является стандартной "рыбой" для текстов на латинице с начала XVI века. В то время некий безымянный печатник создал большую коллекцию размеров и форм шрифтов, используя Lorem Ipsum для распечатки образцов. Lorem Ipsum не только успешно пережил без заметных изменений пять веков, но и перешагнул в электронный дизайн. Его популяризации в новое время послужили публикация листов Letraset с образцами Lorem Ipsum в 60-х годах и, в более недавнее время, программы электронной вёрстки типа Aldus PageMaker, в шаблонах которых используется Lorem Ipsum.';
					var html = '<table style="columns" cellpadding="0" cellspacing="0" style="border:none;width: 100%;"><tr>';
					var wd = Math.round(100/e.data.title);
					for(var i = 0; i<e.data.title; i++ ){
						
						var pad = '';
						
						if(i==0){
							pad = 'padding-right:20px;';
						}
						
						if(i!=e.data.title-1 && i!=0){
							pad = 'padding-right:20px;padding-left:20px;';
						}
						
						if(i==e.data.title-1){
							pad = 'padding-left:20px;';
						}
					
						html += '<td style="'+pad+'width:'+wd+'%;vertical-align:top;text-align:left;">'+dump_text+'</td>';
					}
					html +=    '</tr></table><p>&nbsp;</p>';
                    editor.insertContent(html);
                }
            });
        }
    });

    // Adds a menu item to the tools menu
	/*
    editor.addMenuItem('columns', {
        text: 'Example plugin',
        context: 'tools',
        onclick: function() {
            // Open window with a specific url
            editor.windowManager.open({
                title: 'TinyMCE site',
                url: 'http://www.tinymce.com',
                width: 800,
                height: 600,
                buttons: [{
                    text: 'Close',
                    onclick: 'close'
                }]
            });
        }
    });
	*/
});