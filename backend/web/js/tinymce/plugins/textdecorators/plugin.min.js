tinymce.PluginManager.add('textdecorators', function(editor, url) {

    // Adds a menu item to the tools menu
	
    editor.addMenuItem('textdecorators', {
        text: 'Рамки для текста',
        context: 'tools',
        onclick: function() {
            // Open window
            editor.windowManager.open({
                title: 'Вставка текста в рамку',
                body: [
                    {type: 'textbox', name: 'type', label: 'Кодовое название рамки: (pic1-pic3)'},
					{type: 'textbox', name: 'space', label: 'Отступ от основного текста px'},
					{type: 'textbox', name: 'text',multiline: !0,minWidth:400,minHeight:200,  label: 'Текст в рамке'}
                ],
                onsubmit: function(e) {
                    
					// анализируем что за рамка
					
					var spc = 20;
					
					if(typeof e.data.space != 'undefined' && e.data.space!=''){
						spc = e.data.space;
					}
					
					//
					
					if(e.data.type == 'pic1'){
						var html = '<div class="clear" style="height: '+spc+'px;">&nbsp;</div>';
							html +='<div class="gray_block">';
							html +='<div>« '+e.data.text+' »</div></div>';
							html +='<div class="clear" style="height: '+spc+'px;">&nbsp;</div>';
					}
					
					if(e.data.type == 'pic2'){
						var html = '<div class="clear" style="height: '+spc+'px;">&nbsp;</div>';
							html +='<div class="pic2_block">';
							html +='<div>'+e.data.text+'</div></div>';
							html +='<div class="clear" style="height: '+spc+'px;">&nbsp;</div>';
					}
					
					if(e.data.type == 'pic3'){
						var html = '<div class="clear" style="height: '+spc+'px;">&nbsp;</div>';
							html +='<div class="pic3_block">';
							html +='<div>'+e.data.text+'</div></div>';
							html +='<div class="clear" style="height: '+spc+'px;">&nbsp;</div>';
					}
					
					
					
					html = '<!-- начало рамки '+e.data.type+' -->' + html + '<!-- конец рамки '+e.data.type+' -->';
					
					
                    editor.insertContent(html);
                }
            });
        }
    });
	
});
